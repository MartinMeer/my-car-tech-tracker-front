<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Add Button</title>
    <link rel="stylesheet" href="src/styles/styles.css">
    <link rel="stylesheet" href="src/styles/cars.css">
</head>
<body>
    <div class="container">
        <h1>Test Add Button</h1>
        
        <!-- Simulate the car overview monitor structure -->
        <div class="technical-state-section">
            <h2 class="section-title">Текущее техническое состояние</h2>
            
            <div class="tech-state-split-container">
                <!-- Left Part - User Alerts -->
                <div class="tech-state-left">
                    <div class="tech-state-header">
                        <h3 class="tech-state-subtitle">Пользовательские уведомления</h3>
                        <div class="tech-state-controls">
                            <select id="alert-sort-select" class="sort-select">
                                <option value="date-desc">По дате (новые)</option>
                                <option value="date-asc">По дате (старые)</option>
                                <option value="priority-desc">По приоритету (высокий)</option>
                                <option value="priority-asc">По приоритету (низкий)</option>
                            </select>
                            <button id="new-alert-btn" class="btn-primary btn-sm">+ Добавить</button>
                        </div>
                    </div>
                    
                    <div class="tech-state-content">
                        <div id="user-alerts-container" class="alerts-container">
                            <div class="alerts-placeholder">
                                <p>Тестовые уведомления...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        // Mock DataService for testing
        window.DataService = {
            getCar: async (id) => ({ 
                id, 
                brand: 'Test', 
                model: 'Car', 
                mileage: 50000,
                nickname: 'My Test Car',
                year: 2020,
                img: null
            }),
            getCars: async () => [
                { 
                    id: 'car-1', 
                    brand: 'Test', 
                    model: 'Car 1', 
                    mileage: 50000, 
                    nickname: 'My Test Car',
                    year: 2020,
                    img: null
                }
            ],
            getCurrentCarId: async () => 'car-1'
        };

        // Import the car overview monitor
        import { CarOverviewMonitor } from './src/carOverviewMonitor.js';
        
        // Create test data
        const testAlerts = [
            {
                id: 1,
                carId: 'car-1',
                date: '25.12.2024',
                mileage: 50000,
                subsystem: 'Двигатель',
                priority: 'critical',
                description: 'Странный звук при запуске двигателя',
                archived: false
            }
        ];

        // Mock localStorage for testing
        localStorage.setItem('userAlerts', JSON.stringify(testAlerts));
        localStorage.setItem('currentCarId', 'car-1');
        
        // Set URL hash to simulate my-car-overview page
        window.location.hash = '#my-car-overview?car=car-1';
        
        // Initialize monitor
        const monitor = new CarOverviewMonitor();
        
        console.log('Test button initialized');
        console.log('Click the "+ Добавить" button to test the popup functionality');
        
        // Add a test function to check if the button is working
        window.testButton = function() {
            console.log('Test button function called');
            monitor.showNewAlertPopup();
        };
    </script>
</body>
</html> 