<section class="service-record">
  <!-- Service Record Header -->
  <div class="service-record-header">
    <div class="service-record-title">
      <h2>–ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å –æ–± –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–∏ –º–∞—à–∏–Ω—ã</h2>
      <div class="service-record-car" id="service-record-car" style="display: none;">
        <div class="service-record-car-info">
          <div class="service-record-car-img">
            <span id="service-record-car-img">üöó</span>
          </div>
          <div class="service-record-car-details">
            <div class="service-record-car-name" id="service-record-car-name">–ê–≤—Ç–æ–º–æ–±–∏–ª—å –Ω–µ –≤—ã–±—Ä–∞–Ω</div>
            <div class="service-record-car-year" id="service-record-car-year"></div>
          </div>
        </div>
      </div>
      <div class="service-record-date">
        <label for="service-record-date">
          <span class="icon">üìÖ</span>
          –î–∞—Ç–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è:
        </label>
        <input type="text" id="service-record-date" required pattern="\d{2}\.\d{2}\.\d{4}" placeholder="–¥–¥.–º–º.–≥–≥–≥–≥">
      </div>
      <div class="service-record-mileage">
        <label for="service-record-mileage">
          <span class="icon">üõ£Ô∏è</span>
          –ü—Ä–æ–±–µ–≥ (–∫–º):
        </label>
        <input type="number" id="service-record-mileage" required min="0" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–±–µ–≥">
      </div>
    </div>
    <div class="service-record-actions">
      <button id="save-draft-btn" class="btn btn-secondary" onclick="saveDraft()">
        <span class="icon">üíæ</span>
        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫
      </button>
      <button id="save-and-exit-btn" class="btn btn-primary" onclick="saveAndExit()" disabled>
        <span class="icon">‚úÖ</span>
        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –≤—ã–π—Ç–∏
      </button>
      <button id="exit-without-changes-btn" class="btn btn-danger" onclick="exitWithoutChanges()">
        <span class="icon">‚ùå</span>
        –í—ã–π—Ç–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
      </button>
    </div>
  </div>

  <!-- Service Record Content - Two Panel Layout -->
  <div class="service-record-content">
    <!-- Left Panel - Add Operations -->
    <div class="service-record-left-panel">
      <div class="panel-header">
        <h3>
          <span class="icon">üîß</span>
          –î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏
        </h3>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –æ–ø–µ—Ä–∞—Ü–∏—é</p>
      </div>
      
      <div class="operation-selector">
        <label for="operation-dropdown">
          <span class="icon">üìã</span>
          –í—ã–±–µ—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—é –∏–∑ —Å–ø–∏—Å–∫–∞:
        </label>
        <select id="operation-dropdown" class="operation-dropdown">
          <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏—é --</option>
        </select>
        <div class="operation-hint">
          <span class="icon">üí°</span>
          –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
        </div>
      </div>

      <div class="custom-operation">
        <div class="divider">
          <span>–∏–ª–∏</span>
        </div>
        <p>–ï—Å–ª–∏ –Ω—É–∂–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Å–ø–∏—Å–∫–µ –Ω–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é:</p>
        <button id="custom-repair-btn" class="btn btn-secondary">
          <span class="icon">üìù</span>
          –°–æ–∑–¥–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é
        </button>
      </div>
    </div>

    <!-- Right Panel - Sub-Records List -->
    <div class="service-record-right-panel">
      <div class="panel-header">
        <h3>
          <span class="icon">üìä</span>
          –û–ø–µ—Ä–∞—Ü–∏–∏ –≤ –∑–∞–ø–∏—Å–∏
        </h3>
        <p>–°–ø–∏—Å–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è —ç—Ç–æ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</p>
      </div>
      
      <div id="sub-records-list" class="sub-records-list">
        <div class="empty-state">
          <span class="icon">üìù</span>
          <p>–ù–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</p>
          <p>–î–æ–±–∞–≤—å—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑ –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏</p>
        </div>
      </div>
      
      <div class="service-record-summary">
        <div class="summary-item">
          <span>–í—Å–µ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π:</span>
          <span id="total-operations">0</span>
        </div>
        <div class="summary-item">
          <span>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</span>
          <span id="total-cost">0 ‚ÇΩ</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Maintenance Entry Popup -->
<div id="maint-entry-popup" class="popup-overlay" style="display: none;">
  <div class="popup-content">
    <div class="popup-header">
      <h2 id="maint-operation-name">[operation-maint-name]</h2>
      <button class="close-btn" onclick="closeMaintPopup()">&times;</button>
    </div>
    
    <div class="popup-body">
      <div class="section-divider">
        <h3>
          <span class="icon">üîß</span>
          –†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏ –∏ –∑–∞–ø—á–∞—Å—Ç–∏
        </h3>
        <div class="section-hint">–°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏</div>
      </div>
      
      <div id="consumables-list">
        <!-- Dynamic consumables will be inserted here -->
      </div>
      
      <div class="section-divider">
        <h3>
          <span class="icon">üí∞</span>
          –°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç
        </h3>
      </div>
      
      <div class="input-group">
        <label for="work-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç (‚ÇΩ)</label>
        <div class="cost-input-wrapper">
          <input type="number" id="work-cost" class="cost-input" placeholder="0" min="0" step="0.01">
          <span class="ruble-icon">‚ÇΩ</span>
        </div>
        <div class="input-hint">–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç –º–∞—Å—Ç–µ—Ä–∞</div>
      </div>
      
      <div class="total-section">
        <h3>
          <span class="icon">üí≥</span>
          –ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ
        </h3>
        <div id="maint-total" class="total-amount">0 ‚ÇΩ</div>
      </div>
    </div>
    
    <div class="popup-footer">
      <button class="btn btn-primary" onclick="addMaintenanceToRecord()">–î–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–ø–∏—Å—å</button>
      <button class="btn btn-secondary" onclick="closeMaintPopup()">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>

<!-- Custom Repair Entry Popup -->
<div id="repair-entry-popup" class="popup-overlay" style="display: none;">
  <div class="popup-content">
    <div class="popup-header">
      <h2>–°–æ–∑–¥–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</h2>
      <button class="close-btn" onclick="closeRepairPopup()">&times;</button>
    </div>
    <div class="popup-body">
      <div class="section-divider">
        <h3>
          <span class="icon">üîß</span>
          –ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
        </h3>
      </div>
      
      <div class="input-group">
        <input type="text" id="repair-operation-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏" style="width:100%;margin-bottom:1rem;">
        <div class="input-hint">–û–ø–∏—à–∏—Ç–µ, –∫–∞–∫–∏–µ —Ä–∞–±–æ—Ç—ã –±—ã–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã</div>
      </div>
      
      <div class="section-divider">
        <h3>
          <span class="icon">üî©</span>
          –ó–∞–ø—á–∞—Å—Ç–∏
        </h3>
        <div class="section-hint">–î–æ–±–∞–≤—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—á–∞—Å—Ç–∏</div>
      </div>
      
      <button id="add-spare-btn" class="btn btn-secondary">
        <span class="icon">‚ûï</span>
        –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø—á–∞—Å—Ç—å
      </button>
      
      <div id="spares-list">
        <!-- Dynamic spares will be inserted here -->
      </div>
      
      <div class="section-divider">
        <h3>
          <span class="icon">üí∞</span>
          –°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç
        </h3>
      </div>
      
      <div class="input-group">
        <label for="repair-work-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç (‚ÇΩ)</label>
        <div class="cost-input-wrapper">
          <input type="number" id="repair-work-cost" placeholder="0" min="0" step="0.01">
          <span class="ruble-icon">‚ÇΩ</span>
        </div>
        <div class="input-hint">–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç –º–∞—Å—Ç–µ—Ä–∞</div>
      </div>
      
      <div class="total-section">
        <h3>
          <span class="icon">üí≥</span>
          –ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ
        </h3>
        <div id="repair-total" class="total-amount">0 ‚ÇΩ</div>
      </div>
    </div>
    <div class="popup-footer">
      <button class="btn btn-primary" onclick="addRepairToRecord()">–î–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–ø–∏—Å—å</button>
      <button class="btn btn-secondary" onclick="closeRepairPopup()">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>

<!-- Spare Entry Popup -->
<div id="spare-entry-popup" class="popup-overlay" style="display: none;">
  <div class="popup-content">
    <div class="popup-header">
      <h2>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø—á–∞—Å—Ç—å</h2>
      <button class="close-btn" onclick="closeSparePopup()">&times;</button>
    </div>
    
    <div class="popup-body">
      <div class="input-group">
        <label for="spare-name">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
        <input type="text" id="spare-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–ø—á–∞—Å—Ç–∏">
      </div>
      
      <div class="input-group">
        <label for="spare-quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
        <input type="number" id="spare-quantity" placeholder="1" min="1" step="1" value="1">
      </div>
      
      <div class="input-group">
        <label for="spare-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ –µ–¥–∏–Ω–∏—Ü—É:</label>
        <div class="cost-input-wrapper">
          <input type="number" id="spare-cost" placeholder="0" min="0" step="0.01">
          <span class="ruble-icon">‚ÇΩ</span>
        </div>
      </div>
    </div>
    
    <div class="popup-footer">
      <button class="btn btn-primary" onclick="addSpare()">OK</button>
      <button class="btn btn-secondary" onclick="closeSparePopup()">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div> 